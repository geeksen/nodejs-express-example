<% include ../include/header %>

<!-- Begin page content -->
<div class="container">
    <div class="page-header">
        <h1>
            <a href="/mysql/show_databases">Databases</a>
            /
            <a href="/mysql/show_tables?database=<%= req.query.database %>"><%= req.query.database %></a>
            /
            <a href="/mysql/desc_table?database=<%= req.query.database %>&amp;table=<%= req.query.table %>"><%= req.query.table %></a>
        </h1>
    </div>

    <p>
        <a href="/mysql/insert_form?database=<%= req.query.database %>&amp;table=<%= req.query.table %>">CSV UPLOAD</a>
    </p>

    <div class="table-responsive">
        <table class="table table-bordered">
            <tr class="small">
                <% for (let i = 0; i < columns.length; ++i) { %>
                <th><%= columns[i] %></th>
                <% } %>
                <th></th>
            </tr>
            <form method="post" action="/mysql/execute">
                <tr class="small">
                    <% for (let i = 0; i < columns.length; ++i) { %>
                <td>
                    <input type="text" class="form-control input-sm" name="<%= columns[i] %>" /></td>
                    <% } %>
                <td>
                    <button type="submit" class="btn btn-default btn-xs" name="insert" value="1">Insert</button></td>
                </tr>
            </form>
            <% for (let i = 0; i < rows.length; ++i) { %>
          <form method="post" action="/mysql/execute">
              <tr>
                  <% for (let j = 0; j < columns.length; ++j) { %>
                <td>
                    <input type="text" class="form-control input-sm" name="<%= columns[i] %>" value="<%= rows[i][columns[j]] %>" /></td>
                  <% } %>
              <td>
                  <input type="hidden" name="key" value="<%= keys[0] %>" />
                  <input type="hidden" name="value" value="<%= rows[i][keys[0]] %>" />
                  <button type="submit" class="btn btn-default btn-xs" name="update" value="1">Update</button>
                  <button type="submit" class="btn btn-default btn-xs" name="delete" value="1">Delete</button>
              </td>
              </tr>
          </form>
            <% } %>
        </table>
    </div>

</div>

<% include ../include/footer %>
