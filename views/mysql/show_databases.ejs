<% include ../include/header %>

<!-- Begin page content -->
<div class="container">
    <div class="page-header">
        <h1>
            <a href="/mysql/show_databases">Databases</a>
        </h1>
    </div>

    <p>
        <a href="/mysql/database_form">CREATE DATABASE</a>
    </p>

    <table class="table table-bordered">
        <tr>
            <th>Database</th>
            <th>Drop</th>
        </tr>
        <% for (let i = 0; i < rows.length; ++i) { %>
          <tr>
              <td><a href="/mysql/show_tables?database=<%= rows[i].Database %>"><%= rows[i].Database %></a></td>
              <td>
                  <form class="form-drop" method="post" action="/mysql/drop_database">
                      <input type="hidden" name="database" value="<%= rows[i].Database %>" />
                      <button type="submit" class="btn btn-default">Drop</button>
                  </form>
              </td>
          </tr>
        <% } %>
    </table>

</div>

<script type="text/javascript">
    let confirmFormDrop = function () {
        let formDrop = document.getElementsByClassName('form-drop')
        for (let i = 0; i < formDrop.length; ++i) {
            formDrop[i].onsubmit = function () {
                return confirm('Really?')
            }
        }
    }

    window.onload = function () {
        confirmFormDrop()
    }
</script>

<% include ../include/footer %>
